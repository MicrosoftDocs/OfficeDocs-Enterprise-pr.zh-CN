---
title: 使用 IdFix 工具准备要与 Microsoft 365 同步的目录属性
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom: Adm_O365
ms.collection:
- Ent_O365
- M365-identity-device-management
search.appverid:
- MET150
- MOE150
ms.assetid: 497593cf-24c6-491c-940b-7c86dcde9de0
description: 提供有关如何使用 IdFix 在同步到 Microsoft 365 之前准备和清理本地目录的说明。
ms.openlocfilehash: cae1df048e58c65a3203ea39df18beb986adb0c8
ms.sourcegitcommit: c112869b3ecc0f574b7054ee1edc8c57132f8237
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/15/2020
ms.locfileid: "44736000"
---
# <a name="prepare-directory-attributes-for-synchronization-with-microsoft-365-by-using-the-idfix-tool"></a><span data-ttu-id="088a1-103">使用 IdFix 工具准备要与 Microsoft 365 同步的目录属性</span><span class="sxs-lookup"><span data-stu-id="088a1-103">Prepare directory attributes for synchronization with Microsoft 365 by using the IdFix tool</span></span>

<span data-ttu-id="088a1-104">*本文适用于 Microsoft 365 企业版和 Office 365 企业版。*</span><span class="sxs-lookup"><span data-stu-id="088a1-104">*This article applies to both Microsoft 365 Enterprise and Office 365 Enterprise.*</span></span>

<span data-ttu-id="088a1-105">本主题包含有关运行 IdFix 工具的详细说明、可能遇到的一些常见错误、建议的修补程序、示例和最佳做法，以了解在遇到大量错误时应采取的操作。</span><span class="sxs-lookup"><span data-stu-id="088a1-105">This topic contains detailed instructions about running the IdFix tool, some common errors you may encounter, suggested fixes, examples, and best practices for what to do if you have a large number of errors.</span></span>
  
## <a name="fixing-errors-in-your-directory-by-using-the-idfix-gui"></a><span data-ttu-id="088a1-106">使用 IdFix GUI 修复目录中的错误</span><span class="sxs-lookup"><span data-stu-id="088a1-106">Fixing errors in your directory by using the IdFix GUI</span></span>

<span data-ttu-id="088a1-107">[运行 Microsoft 365 IdFix 工具](install-and-run-idfix.md)以搜索目录中的问题，然后按照本主题中所述修复 GUI 中的错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-107">[Run the Microsoft 365 IdFix tool](install-and-run-idfix.md) to search for problems in your directory and then fix the errors in the GUI as described in this topic.</span></span> <span data-ttu-id="088a1-108">如果该工具返回一个空白表，则不会发现任何错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-108">If a blank table is returned by the tool, then no errors were discovered.</span></span> <span data-ttu-id="088a1-109">如果目录中存在很多问题，则当该工具返回错误时，可能会很困难。</span><span class="sxs-lookup"><span data-stu-id="088a1-109">If there are a lot of problems in your directory, it can be overwhelming when the tool returns the errors.</span></span> <span data-ttu-id="088a1-110">解决此问题的一种方法是先修复一种类型的所有错误，然后再移到下一种类型。</span><span class="sxs-lookup"><span data-stu-id="088a1-110">One way to tackle this is to fix all errors of one type first and then move on to the next type.</span></span> 
  
1. <span data-ttu-id="088a1-111">在开始进行更改之前，请查看 IdFix 提供的建议。</span><span class="sxs-lookup"><span data-stu-id="088a1-111">Before you start making changes, take a look at the recommendations presented by IdFix.</span></span>
    
2. <span data-ttu-id="088a1-112">查看 IdFix 返回的错误列表。</span><span class="sxs-lookup"><span data-stu-id="088a1-112">Look over the list of errors that IdFix has returned.</span></span> <span data-ttu-id="088a1-113">您可以通过单击列出错误类型的列顶部的 "**错误**"，按错误类型对错误进行排序。</span><span class="sxs-lookup"><span data-stu-id="088a1-113">You can sort the errors by error type by clicking **ERROR** at the top of the column that lists the error types.</span></span> <span data-ttu-id="088a1-114">如果有多个错误与单个属性相关联，则这些错误将合并到一行中。</span><span class="sxs-lookup"><span data-stu-id="088a1-114">If more than one error is associated with a single attribute, the errors are combined into one row.</span></span> <span data-ttu-id="088a1-115">在可能的情况下，IdFix 会提供 "**更新**" 列中的修复建议。</span><span class="sxs-lookup"><span data-stu-id="088a1-115">Where possible, IdFix presents a recommendation for a fix in the **UPDATE** column.</span></span> <span data-ttu-id="088a1-116">该修补程序基于与对象关联的其他属性的检查。</span><span class="sxs-lookup"><span data-stu-id="088a1-116">The fix is based on a check of other attributes associated with an object.</span></span> <span data-ttu-id="088a1-117">虽然这些通常比目录中已有的内容更好，但只有您可以决定真正准确的内容。</span><span class="sxs-lookup"><span data-stu-id="088a1-117">While these are usually better than what is already in the directory, only you can decide what is really accurate.</span></span> 
    
3. <span data-ttu-id="088a1-118">如果 IdFix 对修补程序有重复错误的建议，则会通过 "**更新**" 列中值开头的三个标志之一来标识该修补程序（例如，） `[E]john.doe@contoso.com` 。</span><span class="sxs-lookup"><span data-stu-id="088a1-118">If IdFix has a suggestion for a fix for a duplication error, the fix is identified by one of three flags at the start of the value in the **UPDATE** column, for example,  `[E]john.doe@contoso.com`.</span></span> <span data-ttu-id="088a1-119">如果您接受建议，则在应用更改时，将不会在目录中插入标志。</span><span class="sxs-lookup"><span data-stu-id="088a1-119">If you accept the suggestion, when you apply the change the flag will not be inserted in the directory.</span></span> <span data-ttu-id="088a1-120">例如，将仅应用建议标志后面的值 `john.doe@contoso.com` 。</span><span class="sxs-lookup"><span data-stu-id="088a1-120">Only the value following the suggestion flag will be applied, for example,  `john.doe@contoso.com`.</span></span> <span data-ttu-id="088a1-121">如果要接受该建议，请从 "**操作**" 列中选择匹配的操作。</span><span class="sxs-lookup"><span data-stu-id="088a1-121">If you want to accept the suggestion, select the matching action from the **ACTION** column.</span></span> <span data-ttu-id="088a1-122">这些标志指示操作，如下所示：</span><span class="sxs-lookup"><span data-stu-id="088a1-122">The flags indicate actions as follows:</span></span> 
    
 - <span data-ttu-id="088a1-123">**[C]** 建议的操作**完成**。</span><span class="sxs-lookup"><span data-stu-id="088a1-123">**[C]** Suggested action **COMPLETE**.</span></span> <span data-ttu-id="088a1-124">不需要对值进行编辑。</span><span class="sxs-lookup"><span data-stu-id="088a1-124">The value does not need to be edited.</span></span>
    
 - <span data-ttu-id="088a1-125">**[E]** 建议的操作**编辑**。</span><span class="sxs-lookup"><span data-stu-id="088a1-125">**[E]** Suggested action **EDIT**.</span></span> <span data-ttu-id="088a1-126">应更改该值以避免与目录中的其他值发生冲突。</span><span class="sxs-lookup"><span data-stu-id="088a1-126">The value should be changed to avoid conflict with another value in the directory.</span></span>
    
 - <span data-ttu-id="088a1-127">**[R]** 建议**删除**操作。</span><span class="sxs-lookup"><span data-stu-id="088a1-127">**[R]** Suggested action **REMOVE**.</span></span> <span data-ttu-id="088a1-128">该值是启用了非邮件的对象上的 SMTP 代理，可能会安全地删除。</span><span class="sxs-lookup"><span data-stu-id="088a1-128">The value is an SMTP proxy on a non-mail enabled object and can probably be safely removed.</span></span>
    
4. <span data-ttu-id="088a1-129">阅读并了解错误后，请使用所做的更改更新 "**更新**" 列中的条目，然后在 "**操作**" 列中选择您希望 IdFix 实现更改所要执行的操作。</span><span class="sxs-lookup"><span data-stu-id="088a1-129">Once you've read and understood the errors, update the entry in the **UPDATE** column with your changes, and then in the **ACTION** column select what you want IdFix to do to implement the change.</span></span> <span data-ttu-id="088a1-130">例如，两个用户可能会被 `proxyAddress` 标识为重复项。</span><span class="sxs-lookup"><span data-stu-id="088a1-130">For example, two users may have a  `proxyAddress` identified as duplicate.</span></span> <span data-ttu-id="088a1-131">只有一个用户可以使用 `proxyAddress` 进行邮件传递。</span><span class="sxs-lookup"><span data-stu-id="088a1-131">Only one user can use the  `proxyAddress` for mail delivery.</span></span> <span data-ttu-id="088a1-132">若要解决此问题，请将具有正确值的用户的 "**操作**" 列标记为 "已**完成**"，并为其他用户标记 "**操作**" 列**删除**。</span><span class="sxs-lookup"><span data-stu-id="088a1-132">To fix this, mark the **ACTION** column **COMPLETE** for the user with the correct value, and mark the **ACTION** column **REMOVE** for the other user.</span></span> <span data-ttu-id="088a1-133">这将 `proxyAddress` 从用户中删除该属性 `proxyAddress` 不属于的用户，并且不会对其正确的用户做出任何更改 `proxyAddress` 。</span><span class="sxs-lookup"><span data-stu-id="088a1-133">This removes the  `proxyAddress` attribute from the user to whom this  `proxyAddress` doesn't belong and it makes no change to the user for whom this  `proxyAddress` is correct.</span></span>
    
## <a name="common-errors-and-fixes-detected-by-idfix"></a><span data-ttu-id="088a1-134">IdFix 检测到的常见错误和修复</span><span class="sxs-lookup"><span data-stu-id="088a1-134">Common errors and fixes detected by IdFix</span></span>
<span data-ttu-id="088a1-135">下表介绍了 IdFix 检测到的错误，提供了该工具最常推荐的修补程序，在某些情况下，还提供了有关如何修复这些错误的示例。</span><span class="sxs-lookup"><span data-stu-id="088a1-135">The following table describes the errors that are detected by IdFix, provides the most commonly suggested fixes from the tool, and in some cases provides examples of how to fix them.</span></span>

|<span data-ttu-id="088a1-136">**误差**</span><span class="sxs-lookup"><span data-stu-id="088a1-136">**ERROR**</span></span>|<span data-ttu-id="088a1-137">**错误类型说明**</span><span class="sxs-lookup"><span data-stu-id="088a1-137">**Error Type Description**</span></span>|<span data-ttu-id="088a1-138">**建议的修补程序**</span><span class="sxs-lookup"><span data-stu-id="088a1-138">**Suggested Fix**</span></span>|<span data-ttu-id="088a1-139">**示例**</span><span class="sxs-lookup"><span data-stu-id="088a1-139">**Example**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="088a1-140">**通配符**</span><span class="sxs-lookup"><span data-stu-id="088a1-140">**character**</span></span> | <span data-ttu-id="088a1-141">非法字符。</span><span class="sxs-lookup"><span data-stu-id="088a1-141">Illegal characters.</span></span> <span data-ttu-id="088a1-142">值包含无效的字符。</span><span class="sxs-lookup"><span data-stu-id="088a1-142">The value contains a character which is invalid.</span></span> | <span data-ttu-id="088a1-143">"**更新**" 列中显示的错误的建议修补程序将显示值为删除的无效字符。</span><span class="sxs-lookup"><span data-stu-id="088a1-143">The suggested fix for the error shown in the **UPDATE** column shows the value with the invalid character removed.</span></span>  <br/> | <span data-ttu-id="088a1-144">有效邮件地址末尾的尾部空格是非法字符，例如：</span><span class="sxs-lookup"><span data-stu-id="088a1-144">A trailing space at the end of a valid mail address is an illegal character, for example:</span></span>  <br/> <span data-ttu-id="088a1-145">" `user@contoso.com` "</span><span class="sxs-lookup"><span data-stu-id="088a1-145">" `user@contoso.com` "</span></span>  <br/> <span data-ttu-id="088a1-146">有效邮件地址开头的前导空格是非法字符，例如：</span><span class="sxs-lookup"><span data-stu-id="088a1-146">A leading space at the beginning of a valid mail address is an illegal character, for example:</span></span>  <br/> <span data-ttu-id="088a1-147">" ` user@contoso.com `"</span><span class="sxs-lookup"><span data-stu-id="088a1-147">" ` user@contoso.com `"</span></span>  <br/>  <span data-ttu-id="088a1-148">`ú`字符是非法字符。</span><span class="sxs-lookup"><span data-stu-id="088a1-148">The  `ú` character is an illegal character.</span></span> |
|<span data-ttu-id="088a1-149">**直接**</span><span class="sxs-lookup"><span data-stu-id="088a1-149">**duplicate**</span></span> | <span data-ttu-id="088a1-150">重复条目。</span><span class="sxs-lookup"><span data-stu-id="088a1-150">Duplicate entry.</span></span> <span data-ttu-id="088a1-151">值在查询的范围内重复。</span><span class="sxs-lookup"><span data-stu-id="088a1-151">The value has a duplicate within the scope of the query.</span></span> <span data-ttu-id="088a1-152">所有重复值将显示为错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-152">All duplicate values will be displayed as errors.</span></span> | <span data-ttu-id="088a1-153">编辑或删除值以消除重复。</span><span class="sxs-lookup"><span data-stu-id="088a1-153">Edit or remove values to eliminate duplication.</span></span> <span data-ttu-id="088a1-154">该工具不会为重复项提供建议的修补程序。</span><span class="sxs-lookup"><span data-stu-id="088a1-154">The tool will not provide a suggested fix for duplicates.</span></span> <span data-ttu-id="088a1-155">相反，您必须选择两个或更多个重复项中的哪一个是正确的，并删除重复的项。</span><span class="sxs-lookup"><span data-stu-id="088a1-155">Instead, you must choose which of the two or more duplicates is the correct one and delete the duplicate entry or entries.</span></span> ||
|<span data-ttu-id="088a1-156">**format**</span><span class="sxs-lookup"><span data-stu-id="088a1-156">**format**</span></span> | <span data-ttu-id="088a1-157">格式错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-157">Formatting error.</span></span> <span data-ttu-id="088a1-158">此值违反了属性用法的格式要求。</span><span class="sxs-lookup"><span data-stu-id="088a1-158">The value violates the format requirements for the attribute usage.</span></span> | <span data-ttu-id="088a1-159">建议的更新将显示删除了任何无效字符的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-159">The suggested Update will show the value with any invalid characters removed.</span></span> <span data-ttu-id="088a1-160">如果没有无效字符，更新和值将显示相同。</span><span class="sxs-lookup"><span data-stu-id="088a1-160">If there are no invalid characters the Update and Value will appear the same.</span></span> <span data-ttu-id="088a1-161">您需要在更新中确定您真正需要的内容。</span><span class="sxs-lookup"><span data-stu-id="088a1-161">You need to determine what you really want in the Update.</span></span> <span data-ttu-id="088a1-162">该工具不会为所有格式设置错误提供建议的修补程序。</span><span class="sxs-lookup"><span data-stu-id="088a1-162">The tool will not provide a suggested fix for all formatting errors.</span></span> | <span data-ttu-id="088a1-163">例如，SMTP 地址必须符合 RFC 2822，并且 mailNickName 不能以句点开头或结尾。</span><span class="sxs-lookup"><span data-stu-id="088a1-163">For example SMTP addresses must comply with RFC 2822 and mailNickName cannot start or end with a period.</span></span> <span data-ttu-id="088a1-164">有关目录属性的格式要求的详细信息，请参阅[准备通过目录同步将用户预配到 Microsoft 365](prepare-for-directory-synchronization.md)中的 "目录对象和属性准备"。</span><span class="sxs-lookup"><span data-stu-id="088a1-164">For more information about format requirements for directory attributes, see "Directory object and attribute preparation" in [Prepare to provision users through directory synchronization to Microsoft 365](prepare-for-directory-synchronization.md).</span></span> |
|<span data-ttu-id="088a1-165">topleveldomain</span><span class="sxs-lookup"><span data-stu-id="088a1-165">topleveldomain</span></span>  <br/> |<span data-ttu-id="088a1-166">顶级域。</span><span class="sxs-lookup"><span data-stu-id="088a1-166">Top level domain.</span></span> <span data-ttu-id="088a1-167">这适用于受[RFC 2822](https://go.microsoft.com/fwlink/p/?LinkId=401464)格式设置的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-167">This applies to values subject to [RFC 2822](https://go.microsoft.com/fwlink/p/?LinkId=401464) formatting.</span></span> <span data-ttu-id="088a1-168">如果顶级域不是 internet 可路由的，则会将其标识为错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-168">If the top level domain is not internet routable then this will be identified as an error.</span></span> <span data-ttu-id="088a1-169">例如，以结尾的 SMTP 地址。本地不是 internet 路由的，将导致此错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-169">For example an SMTP address ending in .local is not internet routable and would cause this error.</span></span> |<span data-ttu-id="088a1-170">将值更改为 internet 可路由的域，例如 `.com` 或 `.net` 。</span><span class="sxs-lookup"><span data-stu-id="088a1-170">Change the value to an internet routable domain such as  `.com` or  `.net`.</span></span> | <span data-ttu-id="088a1-171">更改 `myaddress@fourthcoffee.local` 为 `fourthcoffee.com` 或其他 internet 可路由域。</span><span class="sxs-lookup"><span data-stu-id="088a1-171">Change  `myaddress@fourthcoffee.local` to  `fourthcoffee.com` or another internet routable domain.</span></span>  <br/> <span data-ttu-id="088a1-172">有关说明，请参阅[如何为目录同步准备不可路由的域（例如，本地域）](prepare-a-non-routable-domain-for-directory-synchronization.md)。</span><span class="sxs-lookup"><span data-stu-id="088a1-172">For instructions, see [How to prepare a non-routable domain (such as .local domain) for directory synchronization](prepare-a-non-routable-domain-for-directory-synchronization.md).</span></span> |
|<span data-ttu-id="088a1-173">**domainpart**</span><span class="sxs-lookup"><span data-stu-id="088a1-173">**domainpart**</span></span> | <span data-ttu-id="088a1-174">域部件错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-174">Domain part error.</span></span> <span data-ttu-id="088a1-175">这适用于受 RFC 2822 格式设置的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-175">This applies to values subject to RFC 2822 formatting.</span></span> <span data-ttu-id="088a1-176">如果值的域部分无效且不符合 RFC 2822，则将生成此值。</span><span class="sxs-lookup"><span data-stu-id="088a1-176">If the domain portion of the value is invalid and does not comply with RFC 2822 this will be generated.</span></span> | <span data-ttu-id="088a1-177">将值更改为符合 RFC 2822 的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-177">Change the value to one that complies with RFC 2822.</span></span> <span data-ttu-id="088a1-178">例如，请确保它不包含任何空格或非法字符。</span><span class="sxs-lookup"><span data-stu-id="088a1-178">For example, make sure that it doesn't contain any spaces or illegal characters.</span></span> | <span data-ttu-id="088a1-179">更改 `myaddress@fourth coffee.com` 为 `myaddress@fourthcoffee.com` 。</span><span class="sxs-lookup"><span data-stu-id="088a1-179">Change  `myaddress@fourth coffee.com` to  `myaddress@fourthcoffee.com`.</span></span> |
|<span data-ttu-id="088a1-180">**domainpart_localpart**</span><span class="sxs-lookup"><span data-stu-id="088a1-180">**domainpart_localpart**</span></span> | <span data-ttu-id="088a1-181">本地错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-181">Local-part error.</span></span> <span data-ttu-id="088a1-182">这适用于受 RFC 2822 格式设置的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-182">This applies to values subject to RFC 2822 formatting.</span></span> <span data-ttu-id="088a1-183">如果值的本地部分无效且不符合 RFC 2822，则将生成此值。</span><span class="sxs-lookup"><span data-stu-id="088a1-183">If the local-part of the value is invalid and does not comply with RFC 2822 this will be generated.</span></span> |<span data-ttu-id="088a1-184">将值更改为符合 RFC 2822 的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-184">Change the value to one that complies with RFC 2822.</span></span> <span data-ttu-id="088a1-185">例如，请确保它不包含任何空格或非法字符。</span><span class="sxs-lookup"><span data-stu-id="088a1-185">For example, make sure that it doesn't contain any spaces or illegal characters.</span></span> |<span data-ttu-id="088a1-186">更改 `my"work"address@fourthcoffee.com` 为 `myworkaddress@fourthcoffee.com` 。</span><span class="sxs-lookup"><span data-stu-id="088a1-186">Change  `my"work"address@fourthcoffee.com` to  `myworkaddress@fourthcoffee.com`.</span></span> |
|<span data-ttu-id="088a1-187">**Length**</span><span class="sxs-lookup"><span data-stu-id="088a1-187">**length**</span></span> | <span data-ttu-id="088a1-188">长度错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-188">Length error.</span></span> <span data-ttu-id="088a1-189">值违反属性的长度限制。</span><span class="sxs-lookup"><span data-stu-id="088a1-189">The value violates the length limit for the attribute.</span></span> <span data-ttu-id="088a1-190">当目录架构已更改时，通常会遇到这种情况。</span><span class="sxs-lookup"><span data-stu-id="088a1-190">This is most commonly encountered when the directory schema has been altered.</span></span>  | <span data-ttu-id="088a1-191">IdFix 建议的更新会将值截断为可接受的长度。</span><span class="sxs-lookup"><span data-stu-id="088a1-191">The update suggested by IdFix will truncate the value to the acceptable length.</span></span>  <br/> <span data-ttu-id="088a1-192">请注意，这可能会产生不理想的结果。</span><span class="sxs-lookup"><span data-stu-id="088a1-192">Be aware that this may produce undesired results.</span></span> <span data-ttu-id="088a1-193">您应查看建议的修补程序并在需要时更改它，然后再单击 "**应用**"。</span><span class="sxs-lookup"><span data-stu-id="088a1-193">You should review the suggested fix and change it if necessary before you click **Apply**.</span></span> ||
|<span data-ttu-id="088a1-194">**空字符**</span><span class="sxs-lookup"><span data-stu-id="088a1-194">**blank**</span></span>  | <span data-ttu-id="088a1-195">空或 null 错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-195">Blank or null error.</span></span> <span data-ttu-id="088a1-196">值违反了要同步的属性的 null 限制。</span><span class="sxs-lookup"><span data-stu-id="088a1-196">The value violates the null restriction for attributes to be synchronized.</span></span> <span data-ttu-id="088a1-197">只有少数几个属性必须包含一个值。</span><span class="sxs-lookup"><span data-stu-id="088a1-197">Only a few attributes must contain a value.</span></span> | <span data-ttu-id="088a1-198">如果可能，建议的更新将利用其他属性值来生成可能的替代项。</span><span class="sxs-lookup"><span data-stu-id="088a1-198">If possible, the suggested update will leverage other attribute values in order to generate a likely substitute.</span></span> ||
|<span data-ttu-id="088a1-199">**mailmatch**</span><span class="sxs-lookup"><span data-stu-id="088a1-199">**mailmatch**</span></span> | <span data-ttu-id="088a1-200">这适用于仅适用于 Microsoft 365 的专用版。</span><span class="sxs-lookup"><span data-stu-id="088a1-200">This applies to Microsoft 365 Dedicated only.</span></span> <span data-ttu-id="088a1-201">值与 mail 属性不匹配。</span><span class="sxs-lookup"><span data-stu-id="088a1-201">The value does not match the mail attribute.</span></span> | <span data-ttu-id="088a1-202">建议的更新将是前缀为 "SMTP：" 的邮件属性值。</span><span class="sxs-lookup"><span data-stu-id="088a1-202">The suggested update will be the mail attribute value prefixed by "SMTP:".</span></span> ||
    
## <a name="operations-you-can-perform-by-using-idfix"></a><span data-ttu-id="088a1-203">您可以使用 IdFix 执行的操作</span><span class="sxs-lookup"><span data-stu-id="088a1-203">Operations you can perform by using IdFix</span></span>
<span data-ttu-id="088a1-204">若要修复错误，请从 "**操作**" 下拉列表中选择一个选项。</span><span class="sxs-lookup"><span data-stu-id="088a1-204">To fix an error, you select an option from the **ACTION** drop-down list.</span></span> <span data-ttu-id="088a1-205">下表介绍了您可以使用 IdFix 工具对属性执行的**操作**操作。</span><span class="sxs-lookup"><span data-stu-id="088a1-205">The following table describes the **ACTION** operations you can perform on attributes using the IdFix tool.</span></span> <span data-ttu-id="088a1-206">如果将 "**操作**" 列保留为空，则 IdFix 工具将不会对目录中的特定错误执行任何操作。</span><span class="sxs-lookup"><span data-stu-id="088a1-206">If you leave the **ACTION** column empty, the IdFix tool will not take any action on that specific error in the directory.</span></span> 

|<span data-ttu-id="088a1-207">**退货**</span><span class="sxs-lookup"><span data-stu-id="088a1-207">**ACTION**</span></span>|<span data-ttu-id="088a1-208">**操作说明**</span><span class="sxs-lookup"><span data-stu-id="088a1-208">**Action description**</span></span>|<span data-ttu-id="088a1-209">**示例**</span><span class="sxs-lookup"><span data-stu-id="088a1-209">**Example**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="088a1-210">**全面**</span><span class="sxs-lookup"><span data-stu-id="088a1-210">**COMPLETE**</span></span> | <span data-ttu-id="088a1-211">原始值是可接受的，即使被标识为错误，也不应更改。</span><span class="sxs-lookup"><span data-stu-id="088a1-211">The original value is acceptable and should not be changed despite being identified as an error.</span></span> | <span data-ttu-id="088a1-212">两个用户有一个被标识为重复的 proxyAddress。</span><span class="sxs-lookup"><span data-stu-id="088a1-212">Two users have a proxyAddress identified as duplicate.</span></span> <span data-ttu-id="088a1-213">只有一种情况可以使用邮件传递的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-213">Only one can use the value for mail delivery.</span></span> <span data-ttu-id="088a1-214">将具有正确值的用户标记为 "已**完成**"。</span><span class="sxs-lookup"><span data-stu-id="088a1-214">Mark the user with the correct value as **COMPLETE**.</span></span> |
|<span data-ttu-id="088a1-215">**删除**</span><span class="sxs-lookup"><span data-stu-id="088a1-215">**REMOVE**</span></span> | <span data-ttu-id="088a1-216">属性值将从源对象中删除。</span><span class="sxs-lookup"><span data-stu-id="088a1-216">The attribute value will be deleted from the source object.</span></span> <span data-ttu-id="088a1-217">对于多值属性，例如， `proxyAddresses` 只有显示的单个值将被删除。</span><span class="sxs-lookup"><span data-stu-id="088a1-217">In the case of a multi-valued attribute, for example,  `proxyAddresses`, only the individual value shown will be deleted.</span></span> | <span data-ttu-id="088a1-218">两个用户有一个被标识为重复的 proxyAddress。</span><span class="sxs-lookup"><span data-stu-id="088a1-218">Two users have a proxyAddress identified as duplicate.</span></span> <span data-ttu-id="088a1-219">只有一种情况可以使用邮件传递的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-219">Only one can use the value for mail delivery.</span></span> <span data-ttu-id="088a1-220">将具有重复值的用户标记为 "**删除**"。</span><span class="sxs-lookup"><span data-stu-id="088a1-220">Mark the user with the duplicate value as **REMOVE**.</span></span> |
|<span data-ttu-id="088a1-221">**编辑**</span><span class="sxs-lookup"><span data-stu-id="088a1-221">**EDIT**</span></span> | <span data-ttu-id="088a1-222">将使用 "**更新**" 列中的信息修改属性值。</span><span class="sxs-lookup"><span data-stu-id="088a1-222">The information in the **UPDATE** column will be used to modify the attribute value.</span></span> <span data-ttu-id="088a1-223">如果已通过 IdFix 建议了有效的**更新**值，则从 "**操作**" 列中选择 "**编辑**"，然后继续执行下一个错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-223">If a valid **UPDATE** value has been suggested by IdFix, then from the **ACTION** column, select **EDIT** and go on to the next error.</span></span> <span data-ttu-id="088a1-224">如果不喜欢该建议，请在 "**更新**" 列中键入新的，然后从 "**操作**" 列中选择 "**编辑**"。</span><span class="sxs-lookup"><span data-stu-id="088a1-224">If you don't like the suggestion, type a new one in the **UPDATE** column and then, from the **ACTION** column select **EDIT**.</span></span> ||
|<span data-ttu-id="088a1-225">**取消**</span><span class="sxs-lookup"><span data-stu-id="088a1-225">**UNDO**</span></span> | <span data-ttu-id="088a1-226">仅当您从事务日志中还原时，此选项才可用。</span><span class="sxs-lookup"><span data-stu-id="088a1-226">This option is only available if you have restored from a transaction log.</span></span> <span data-ttu-id="088a1-227">如果选择 "**撤消**"，则会将属性值还原为原始值。</span><span class="sxs-lookup"><span data-stu-id="088a1-227">If you select **UNDO**, the attribute value will be restored to the original value.</span></span> ||
|<span data-ttu-id="088a1-228">**FAIL**</span><span class="sxs-lookup"><span data-stu-id="088a1-228">**FAIL**</span></span> | <span data-ttu-id="088a1-229">仅当**更新**值与 AD DS 规则发生未知冲突时，才会返回此值。</span><span class="sxs-lookup"><span data-stu-id="088a1-229">This value is only returned if an **UPDATE** value has an unknown conflict with AD DS rules.</span></span> <span data-ttu-id="088a1-230">在这种情况下，如果您知道故障是什么，则可以再次编辑 "**更新**" 列中的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-230">In this case, you can edit the value in the **UPDATE** column again if you know what the failure is.</span></span> <span data-ttu-id="088a1-231">可能需要使用 ADSI Edit 分析对象中的值。</span><span class="sxs-lookup"><span data-stu-id="088a1-231">It may be necessary to analyze the values in the object using ADSI Edit.</span></span> <span data-ttu-id="088a1-232">有关详细信息，请参阅[ADSI Edit （adsi .msc）](https://go.microsoft.com/fwlink/p/?LinkId=401170)。</span><span class="sxs-lookup"><span data-stu-id="088a1-232">For more information, see [ADSI Edit (adsiedit.msc)](https://go.microsoft.com/fwlink/p/?LinkId=401170).</span></span> ||

<span data-ttu-id="088a1-233">为错误或错误批处理选择**操作**后，单击 "**应用**"。</span><span class="sxs-lookup"><span data-stu-id="088a1-233">After choosing an **ACTION** for an error or a batch of errors, click **Apply**.</span></span> <span data-ttu-id="088a1-234">当您单击 "**应用**" 时，该工具会在目录中进行更改。</span><span class="sxs-lookup"><span data-stu-id="088a1-234">When you click **Apply**, the tool makes the changes in the directory.</span></span> <span data-ttu-id="088a1-235">您可以在单击 "**应用**" 之前提供多个错误的修复程序，IdFix 将同时更改所有这些错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-235">You can provide fixes for multiple errors before you click **Apply** and IdFix will change them all at the same time.</span></span>

<span data-ttu-id="088a1-236">再次运行 IdFix 以确保您所做的修补程序未引入新的错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-236">Run IdFix again to ensure that the fixes you made didn't introduce new errors.</span></span> <span data-ttu-id="088a1-237">您可以根据需要多次重复这些步骤。</span><span class="sxs-lookup"><span data-stu-id="088a1-237">You can repeat these steps as many times as you need to.</span></span> <span data-ttu-id="088a1-238">在同步之前，最好先完成几次此过程。</span><span class="sxs-lookup"><span data-stu-id="088a1-238">It's a good idea to go through the process a few times before you synchronize.</span></span>
    
## <a name="changing-the-rule-set-used-by-idfix"></a><span data-ttu-id="088a1-239">更改 IdFix 使用的规则集</span><span class="sxs-lookup"><span data-stu-id="088a1-239">Changing the rule set used by IdFix</span></span>
<span data-ttu-id="088a1-240">默认情况下，IdFix 使用多租户规则集测试目录中的条目。</span><span class="sxs-lookup"><span data-stu-id="088a1-240">By default, IdFix uses the Multi-Tenant rule set to test the entries in your directory.</span></span> <span data-ttu-id="088a1-241">这是大多数 Microsoft 365 客户的正确规则集。</span><span class="sxs-lookup"><span data-stu-id="088a1-241">This is the right rule set for most Microsoft 365 customers.</span></span> <span data-ttu-id="088a1-242">但是，如果您是 Microsoft 365 专用或 ITAR （Arm 规章中的国际流量）客户，则可以将 IdFix 配置为改用专用规则集。</span><span class="sxs-lookup"><span data-stu-id="088a1-242">However, if you are a Microsoft 365 Dedicated or ITAR (International Traffic in Arms Regulations) customer, you can configure IdFix to use the Dedicated rule set instead.</span></span> <span data-ttu-id="088a1-243">如果您不确定您是哪种类型的客户，则可以安全地跳过此步骤。</span><span class="sxs-lookup"><span data-stu-id="088a1-243">If you aren't sure what type of customer you are, you can safely skip this step.</span></span> <span data-ttu-id="088a1-244">若要将规则集设置为专用，请单击菜单栏中的齿轮图标，然后单击 "**专用**"。</span><span class="sxs-lookup"><span data-stu-id="088a1-244">To set the rule set to Dedicated, click the gear icon in the menu bar and then click **Dedicated**.</span></span>
  
## <a name="changing-the-scope-of-the-search-used-by-idfix"></a><span data-ttu-id="088a1-245">更改 IdFix 使用的搜索范围</span><span class="sxs-lookup"><span data-stu-id="088a1-245">Changing the scope of the search used by IdFix</span></span>
<span data-ttu-id="088a1-246">默认情况下，IdFix 搜索整个目录。</span><span class="sxs-lookup"><span data-stu-id="088a1-246">By default, IdFix searches the entire directory.</span></span> <span data-ttu-id="088a1-247">如果需要，您可以将工具配置为搜索特定子树（而不是搜索）。</span><span class="sxs-lookup"><span data-stu-id="088a1-247">If you want, you can configure the tool to search a specific subtree instead.</span></span> <span data-ttu-id="088a1-248">若要执行此操作，请在菜单栏中，单击 "筛选器" 图标，然后输入一个有效的子树。</span><span class="sxs-lookup"><span data-stu-id="088a1-248">To do this, in the menu bar, click the Filter icon and enter a valid subtree.</span></span>
  
## <a name="rolling-back-your-changes-by-using-the-idfix-gui"></a><span data-ttu-id="088a1-249">通过使用 IdFix GUI 回滚您的更改</span><span class="sxs-lookup"><span data-stu-id="088a1-249">Rolling back your changes by using the IdFix GUI</span></span>
<span data-ttu-id="088a1-250">每次单击 "**应用**" 以应用更改时，IdFix 工具将创建一个名为 "事务日志" 的单独文件，其中列出了刚才所做的更改。</span><span class="sxs-lookup"><span data-stu-id="088a1-250">Each time you click **Apply** to apply changes, the IdFix tool creates a separate file called a transaction log that lists the changes you just made.</span></span> <span data-ttu-id="088a1-251">您可以使用事务日志回滚在最近的日志中进行的更改，以防您犯错误。</span><span class="sxs-lookup"><span data-stu-id="088a1-251">You can use the transaction log to roll back just those changes that are in the most recent log in case you make a mistake.</span></span> <span data-ttu-id="088a1-252">如果在更新过程中出现错误，则可以通过单击 "**撤消**" 来撤消最近应用的更改。</span><span class="sxs-lookup"><span data-stu-id="088a1-252">If you make a mistake while you are updating, you can undo the most recently applied changes by clicking **Undo**.</span></span> <span data-ttu-id="088a1-253">当您单击 "**撤消**" 时，IdFix 将使用事务日志回滚在最近的事务日志中的更改。</span><span class="sxs-lookup"><span data-stu-id="088a1-253">When you click **Undo**, IdFix uses the transaction log to roll back just those changes that are in the most recent transaction log.</span></span> <span data-ttu-id="088a1-254">有关使用事务日志的详细信息，请参阅[Microsoft 365 IdFix transaction log](idfix-transaction-log.md)。</span><span class="sxs-lookup"><span data-stu-id="088a1-254">For more information about using the transaction log, see [Microsoft 365 IdFix transaction log](idfix-transaction-log.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="088a1-255">后续步骤</span><span class="sxs-lookup"><span data-stu-id="088a1-255">Next step</span></span>

[<span data-ttu-id="088a1-256">设置目录同步</span><span class="sxs-lookup"><span data-stu-id="088a1-256">Set up directory synchronization</span></span>](set-up-directory-synchronization.md)
