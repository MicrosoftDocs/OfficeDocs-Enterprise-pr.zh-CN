---
title: 使用 SharePoint Online 的页面诊断工具
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.collection: Ent_O365
search.appverid:
- MET150
- SPO160
- MOE150
- BSA160
ms.assetid: dbab2593-dc6a-40f7-adfe-031b9baa620f
description: 使用 "SharePoint 中的页面诊断" 工具分析针对 SharePoint Online 建议的最佳实践的经典页面。
ms.openlocfilehash: f61d680ab4470429436cd0bb88925c2f1fc63323
ms.sourcegitcommit: 6b4c3a11ef7000480463d43a7a4bc2ced063efce
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/10/2019
ms.locfileid: "35616795"
---
# <a name="use-the-page-diagnostics-tool-for-sharepoint-online"></a><span data-ttu-id="73c64-103">使用 SharePoint Online 的页面诊断工具</span><span class="sxs-lookup"><span data-stu-id="73c64-103">Use the Page Diagnostics tool for SharePoint Online</span></span>

<span data-ttu-id="73c64-104">本文介绍如何使用页面诊断工具根据**SharePoint Online**中的建议做法的子集分析经典团队网站上的经典发布页面和页面。</span><span class="sxs-lookup"><span data-stu-id="73c64-104">This article describes how you can use the Page Diagnostic tool to analyze your classic publishing pages and pages on classic team sites, against a subset of recommended practices in **SharePoint Online**.</span></span> 
  
<span data-ttu-id="73c64-105">未启用发布的工作组网站无法使用 Cdn, 但其余所有规则均适用。</span><span class="sxs-lookup"><span data-stu-id="73c64-105">Team sites that don't have Publishing enabled cannot make use of CDNs but all of the remaining rules are applicable.</span></span> <span data-ttu-id="73c64-106">发布会增加额外的开销, 因此不会启用仅发布来获取 CDN 功能, 因为这样会对页面加载时间产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="73c64-106">Publishing adds additional overhead so do not turn on Publishing just to get the CDN functionality as it will negatively impact page load times.</span></span>

<span data-ttu-id="73c64-107">**请注意, 已发布 1.05, 如果你已安装, 请更新你的扩展**。</span><span class="sxs-lookup"><span data-stu-id="73c64-107">**Please note that V1.05 has been released so please update your extension if you have it installed already**.</span></span> <span data-ttu-id="73c64-108">如果您不确定所使用的版本, 请单击 "关于" 链接进行验证。</span><span class="sxs-lookup"><span data-stu-id="73c64-108">If you are unsure which version you have then please click the "About" link to verify it.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="73c64-109">页面诊断工具不会对文档库或系统页面运行, 因为此工具旨在审阅 SharePoint 网站页面。</span><span class="sxs-lookup"><span data-stu-id="73c64-109">The Page Diagnostics tool will not run against document libraries or system pages, as the tool is designed to review SharePoint site pages.</span></span> <span data-ttu-id="73c64-110">*Allitems.aspx*页面是系统页面。</span><span class="sxs-lookup"><span data-stu-id="73c64-110">An  *allitems.aspx*  page is a system page.</span></span> <span data-ttu-id="73c64-111">如果尝试在系统页面上运行该工具, 则会收到一条消息, 其中显示 "此应用程序应仅在 SharePoint 页面上运行"。</span><span class="sxs-lookup"><span data-stu-id="73c64-111">If you attempt to run the tool on a system page, you will get a message that reads, "This application should only be run on SharePoint pages."</span></span> <br/> <span data-ttu-id="73c64-112">![必须在 SharePoint 页面上运行](media/34aadfff-1009-496b-9c87-4fc2780e017c.png)</span><span class="sxs-lookup"><span data-stu-id="73c64-112">![Must run on a SharePoint page](media/34aadfff-1009-496b-9c87-4fc2780e017c.png)</span></span><br/><span data-ttu-id="73c64-113">这不是工具中的错误, 因为评估库或系统页面时没有任何价值。</span><span class="sxs-lookup"><span data-stu-id="73c64-113">This is not an error in the tool as there is no value in assessing libraries or system pages.</span></span> <span data-ttu-id="73c64-114">请导航到非系统 SharePoint 页面以使用该工具。</span><span class="sxs-lookup"><span data-stu-id="73c64-114">Please navigate to a non-system SharePoint page to use the tool.</span></span> <span data-ttu-id="73c64-115">如果在 SharePoint 页面上发生这种情况, 请检查 MasterPage, 因为我们已看到客户删除了 SharePoint MetaTags, 然后该页面不再是 SharePoint 页面。</span><span class="sxs-lookup"><span data-stu-id="73c64-115">If this occurs on a SharePoint page then please check the MasterPage as we have seen Customers remove the SharePoint MetaTags and then the page is no longer a SharePoint page.</span></span> <span data-ttu-id="73c64-116">如果您希望提供有关该工具的反馈, 请单击 "关于" 选项卡, 然后按照 "[提供反馈" 链接](https://go.microsoft.com/fwlink/?linkid=874109)操作。</span><span class="sxs-lookup"><span data-stu-id="73c64-116">Should you wish to give feedback about the tool please click the About tab and follow the [give feedback link](https://go.microsoft.com/fwlink/?linkid=874109).</span></span> 
  
## <a name="install-the-page-diagnostic-tool"></a><span data-ttu-id="73c64-117">安装页面诊断工具</span><span class="sxs-lookup"><span data-stu-id="73c64-117">Install the Page Diagnostic tool</span></span>

> [!IMPORTANT]
> <span data-ttu-id="73c64-118">Microsoft 不会读取您访问的数据或网站, 我们不会使用此工具捕获任何个人信息、网站或下载信息。</span><span class="sxs-lookup"><span data-stu-id="73c64-118">Microsoft does not read the data or websites you visit, and we do not capture any personal information, website or download information with this tool.</span></span> <span data-ttu-id="73c64-119">该工具记录的唯一信息是租户名称、规则计数以及在运行该工具时是否使用了支持日志记录选项。</span><span class="sxs-lookup"><span data-stu-id="73c64-119">The only information logged by the tool is the Tenant name, Rule count and whether the support logging option has been utilized when the tool is run.</span></span> <span data-ttu-id="73c64-120">此信息适用于 Microsoft 分析客户遇到的难题, 并确保不会误用支持日志记录功能。</span><span class="sxs-lookup"><span data-stu-id="73c64-120">This information is for Microsoft to analyze what challenges are being experienced by our Customers and to ensure the Support logging capability is not being misused.</span></span>

1. <span data-ttu-id="73c64-121">使用 Chrome 浏览器, 直接打开该[工具的链接](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi)或在[Chrome 浏览器](https://chrome.google.com/webstore/search/page%20diagnostics%20for%20sharepoint)中打开搜索 WebStore 并安装浏览器扩展。</span><span class="sxs-lookup"><span data-stu-id="73c64-121">Using a Chrome browser, open the [link to the tool](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi) directly or open the Search in the [Chrome Browser WebStore](https://chrome.google.com/webstore/search/page%20diagnostics%20for%20sharepoint) and install the browser extension.</span></span> <span data-ttu-id="73c64-122">请查看 store 中的 "说明" 页上提供的用户隐私策略。</span><span class="sxs-lookup"><span data-stu-id="73c64-122">Please review the User Privacy Policy provided on the description page in the store.</span></span> <span data-ttu-id="73c64-123">向浏览器添加工具时, 您将看到以下权限通知。</span><span class="sxs-lookup"><span data-stu-id="73c64-123">When adding the tool to your browser, you will see the following permissions notice.</span></span><br/><span data-ttu-id="73c64-124">![Chrome Store 权限](media/e9fbcef0-1171-43ac-8ea8-c2b5be1b7925.png)</span><span class="sxs-lookup"><span data-stu-id="73c64-124">![Chrome Store permissions](media/e9fbcef0-1171-43ac-8ea8-c2b5be1b7925.png)</span></span><br/>   <span data-ttu-id="73c64-125">此通知已就绪, 因为页面可能包含来自 SharePoint 之外的位置的内容, 具体取决于页面上的 web 部件和自定义项。</span><span class="sxs-lookup"><span data-stu-id="73c64-125">This notice is in place because a page may contain content from locations outside of SharePoint depending on the webparts and customizations on the page.</span></span> <span data-ttu-id="73c64-126">这意味着, 在单击 "开始" 按钮时, 该工具将读取请求和响应, 并且仅针对运行该工具的活动 SharePoint 选项卡。</span><span class="sxs-lookup"><span data-stu-id="73c64-126">This means that the tool will read the requests and responses when the start button is clicked and only for the active SharePoint tab where the tool is running.</span></span> <span data-ttu-id="73c64-127">该信息由 web 浏览器在本地捕获, 并可通过工具中的 "导出到 JSON" 链接供您使用。</span><span class="sxs-lookup"><span data-stu-id="73c64-127">That information is captured locally by the web browser and is available to you via the Export to JSON link in the tool.</span></span> <span data-ttu-id="73c64-128">**此信息不会发送到 Microsoft 或由 Microsoft 捕获。**</span><span class="sxs-lookup"><span data-stu-id="73c64-128">**The information is not sent to or captured by Microsoft.**</span></span> <span data-ttu-id="73c64-129">(此工具尊重[此处](https://go.microsoft.com/fwlink/p/?linkid=857875)可访问的 Microsoft 隐私策略。)</span><span class="sxs-lookup"><span data-stu-id="73c64-129">(The tool respects the Microsoft Privacy policy accessible [here](https://go.microsoft.com/fwlink/p/?linkid=857875).)</span></span><br/><br/><span data-ttu-id="73c64-130">工具中的 "导出到 JSON" 功能也是为什么需要 "管理下载" 权限的原因。</span><span class="sxs-lookup"><span data-stu-id="73c64-130">The "Export to JSON" functionality in the tool is also why the "Manage your downloads" permission is needed.</span></span> <span data-ttu-id="73c64-131">在您的组织外部共享 JSON 文件之前, 请按照贵公司自己的隐私准则进行操作, 因为结果中包含 Url, 并且可以归类为 PII (个人身份信息)。</span><span class="sxs-lookup"><span data-stu-id="73c64-131">Please follow your Company's own Privacy guidelines before sharing the JSON file outside of your organization, as the results contain URLs and that can be classified as PII (Personally Identifiable Information).</span></span>
    
2. <span data-ttu-id="73c64-132">(这是可选的)如果要在 Chrome incognito 模式中使用该工具, 请导航到该分机号码并单击**incognito 中的 "允许"**。</span><span class="sxs-lookup"><span data-stu-id="73c64-132">(This is optional) If you want to use the tool in Chrome incognito mode, navigate to the extension and click **allow in incognito**.</span></span>
    
3. <span data-ttu-id="73c64-133">在 SharePoint Online 上导航到您要查看的 SharePoint 经典发布页面。</span><span class="sxs-lookup"><span data-stu-id="73c64-133">Navigate to the SharePoint classic publishing page on SharePoint Online that you would like to review.</span></span> <span data-ttu-id="73c64-134">我们允许对页面上的项目进行 "延迟加载";因此, 该**工具不会自动停止**。</span><span class="sxs-lookup"><span data-stu-id="73c64-134">We have allowed for "delay loading" of items on pages; therefore, the **tool will not stop automatically**.</span></span> <span data-ttu-id="73c64-135">如果要停止收集, 可以单击 "**停止**"。</span><span class="sxs-lookup"><span data-stu-id="73c64-135">Should you wish to stop collection, you can click **Stop**.</span></span> <span data-ttu-id="73c64-136">(这是针对所有页面加载场景的设计。)在单击 "**停止**" 之前, 请确保网络跟踪数据已完成。</span><span class="sxs-lookup"><span data-stu-id="73c64-136">(This is by design to cater for all page load scenarios.) Before you click **Stop**, make sure that the network trace data is complete.</span></span> <span data-ttu-id="73c64-137">否则, 将具有部分跟踪。</span><span class="sxs-lookup"><span data-stu-id="73c64-137">Otherwise, you will have a partial trace.</span></span> <span data-ttu-id="73c64-138">此外, 该工具是一个浏览器扩展, 打开多个选项卡或窗口将只允许一次运行该工具的一个活动实例。</span><span class="sxs-lookup"><span data-stu-id="73c64-138">Additionally, the tool is a Browser Extension, and opening multiple tabs or windows will only allow one active instance of the tool to be run at one time.</span></span> <span data-ttu-id="73c64-139">这是浏览器中的扩展的限制。</span><span class="sxs-lookup"><span data-stu-id="73c64-139">This is a limitation of extensions in the browser.</span></span> 
  
4. <span data-ttu-id="73c64-140">单击扩展徽标</span><span class="sxs-lookup"><span data-stu-id="73c64-140">Click on the Extension logo</span></span> ![SharePoint 徽标的页面诊断](media/60a3e44d-1b59-483f-b50f-d580044d921a.png) <span data-ttu-id="73c64-142">加载工具时, 将显示以下扩展名弹出窗口:</span><span class="sxs-lookup"><span data-stu-id="73c64-142">to load the tool and you will be presented with the following extension popup window:</span></span><br/> ![页面诊断工具弹出菜单](media/b01fa00e-c5f3-4c37-91f2-6edd096cf87e.png)<br/><span data-ttu-id="73c64-144">启动和停止操作遵循以下基本概念: 当您单击 "启动页面时, 将开始重新加载并收集"。</span><span class="sxs-lookup"><span data-stu-id="73c64-144">Start and stop operations follow the basic concept of when you click start the page will reload and collection will begin.</span></span>

<span data-ttu-id="73c64-145">阅读以下各节, 了解有关该工具中提供的信息的详细信息。</span><span class="sxs-lookup"><span data-stu-id="73c64-145">Read the following sections to learn more about the information provided in the tool.</span></span>

## <a name="what-youll-see-in-the-page-diagnostics-tool"></a><span data-ttu-id="73c64-146">您将在页面诊断工具中看到的内容</span><span class="sxs-lookup"><span data-stu-id="73c64-146">What you'll see in the Page Diagnostics tool</span></span>
    
1. <span data-ttu-id="73c64-147">"**关于**" 链接将提供有关工具的一般指导和详细信息, 其中包括返回到本文的链接。</span><span class="sxs-lookup"><span data-stu-id="73c64-147">The **About** link will provide general guidance and details regarding the tool including a link back to this article.</span></span> <span data-ttu-id="73c64-148">此外, 它还包括指向 SharePoint 性能建议的直接链接、第三方通知以及提供有关该工具的反馈的选项。</span><span class="sxs-lookup"><span data-stu-id="73c64-148">It also includes a direct link to SharePoint Performance recommendations, a Third Party notice and an option to provide feedback about the tool.</span></span> 
    
2. <span data-ttu-id="73c64-149">**相关 ID、SPRequestDuration、SPIISLatency**、**页面加载时间**和**URL**详细信息都是信息, 可用于以下几个用途。</span><span class="sxs-lookup"><span data-stu-id="73c64-149">The **Correlation ID, SPRequestDuration, SPIISLatency**, **Page load time**, and **URL** details are informational and can be used for a few purposes.</span></span> 
    
  - <span data-ttu-id="73c64-150">**CorrelationID**是使用 Microsoft 支持团队时的一个重要元素, 因为它允许他们获取其他诊断数据。</span><span class="sxs-lookup"><span data-stu-id="73c64-150">**CorrelationID** is an important element when working with the Microsoft Support Teams as it allows them to pull additional diagnostic data.</span></span> 
    
  - <span data-ttu-id="73c64-151">**SPRequestDuration**是处理页面所用的服务器时间。</span><span class="sxs-lookup"><span data-stu-id="73c64-151">**SPRequestDuration** is the server time taken to process the page.</span></span> <span data-ttu-id="73c64-152">如果此时间很长, 则不一定意味着服务器执行得不正常, 但还可以反映由页面推送到服务器的呼叫和负载的数量, 例如结构导航、大型图像、大量 API 调用可能会导致服务器时间更长.</span><span class="sxs-lookup"><span data-stu-id="73c64-152">If this time is long, it does not necessarily mean that the server was performing badly but can also reflect the number of calls and load pushed by the page to the server e.g. Structural Navigation, large images, lots of API calls could all contribute to longer server time.</span></span> 
    
  - <span data-ttu-id="73c64-153">**SPIISLatency**是在 Web 前端服务器收到加载页面的请求时所采用的时间 (以毫秒为单位)。</span><span class="sxs-lookup"><span data-stu-id="73c64-153">**SPIISLatency** is the time in milliseconds taken on the Web Front End Server when it receives the request to load the page.</span></span> <span data-ttu-id="73c64-154">这是开始处理页面的延迟的指示器, 不包括 web 应用程序响应所需的时间。</span><span class="sxs-lookup"><span data-stu-id="73c64-154">This is an indicator of latency to start processing the page and does not include the time taken for the web application to respond.</span></span> 
    
  - <span data-ttu-id="73c64-155">**页面加载时间**是在请求收到并由浏览器读取响应时的页面记录的时间。</span><span class="sxs-lookup"><span data-stu-id="73c64-155">**Page load time** is the time recorded by the page from the time of the request to the time the response was received and read by the browser.</span></span> <span data-ttu-id="73c64-156">任何额外时间都会受到计算机性能和浏览器加载所需的时间的影响。</span><span class="sxs-lookup"><span data-stu-id="73c64-156">Any additional time is affected by the performance of the computer and the time it takes for the browser to load.</span></span> 
    
  - <span data-ttu-id="73c64-157">**URL** (统一资源定位器) 是当前页面的 web 地址。</span><span class="sxs-lookup"><span data-stu-id="73c64-157">The **URL** (Uniform Resource Locator) is the web address of the current page.</span></span> 
    
3. <span data-ttu-id="73c64-158">" [**诊断**" 选项卡](#how-to-use-the-diagnostic-tab)将列出规则, 如果其中有任何标记为红色![交叉](media/9859ac84-be43-4eae-984c-e0e827f5a228.png), 则会在页面上发现问题。</span><span class="sxs-lookup"><span data-stu-id="73c64-158">The [**Diagnostic** tab](#how-to-use-the-diagnostic-tab) will list the rules and if any of them are marked with a red ![Cross](media/9859ac84-be43-4eae-984c-e0e827f5a228.png), then there are issues identified on the page.</span></span><br/><span data-ttu-id="73c64-159">每个规则都有自己的 "详细信息" 链接, 您可以在项目为红色时单击它。</span><span class="sxs-lookup"><span data-stu-id="73c64-159">Each rule has its own "more information" link that you click if an item is red.</span></span> <span data-ttu-id="73c64-160">这将转到该规则背后的详细信息以及如何修正此问题。</span><span class="sxs-lookup"><span data-stu-id="73c64-160">That will take you to the details behind that rule and how to remediate the issue.</span></span><br/><span data-ttu-id="73c64-161">![诊断红色-规则打开](media/1598f0f7-3103-4613-8787-dfec6fffd40a.png)</span><span class="sxs-lookup"><span data-stu-id="73c64-161">![Diagnostics Red - Rule open](media/1598f0f7-3103-4613-8787-dfec6fffd40a.png)</span></span>

4. <span data-ttu-id="73c64-162">" [**网络跟踪**" 选项卡](#how-to-use-the-network-trace-tab)提供有关页面生成请求和响应的详细信息。</span><span class="sxs-lookup"><span data-stu-id="73c64-162">A [**Network trace** tab](#how-to-use-the-network-trace-tab) provides details about page build requests and responses.</span></span>

## <a name="how-to-use-the-diagnostic-tab"></a><span data-ttu-id="73c64-163">如何使用 "诊断" 选项卡</span><span class="sxs-lookup"><span data-stu-id="73c64-163">How to use the Diagnostic tab</span></span>

1. <span data-ttu-id="73c64-164">**检查作为标准用户运行** 如果以服务帐户、管理员或网站集管理员身份登录, 或使用提升权限的任何帐户登录, 则不应执行页面性能检查。</span><span class="sxs-lookup"><span data-stu-id="73c64-164">**Check Running as Standard User**  Checking page performance should not be performed when logged in as a Service Account, Administrator or Site Collection Administrator, or any account with elevated privileges.</span></span> <span data-ttu-id="73c64-165">额外的脚本和功能专为这些帐户类型加载, 因此结果将不是页面性能的真正表现形式。</span><span class="sxs-lookup"><span data-stu-id="73c64-165">Additional scripts and functionality are loaded specifically for those types of accounts, so the results will not be a true representation of page performance.</span></span>
    
2. <span data-ttu-id="73c64-166">**将请求签入 SharePoint** 应限制对服务器进行的数据量和对服务器的请求量, 因为重载页面会遇到性能较差的情况。</span><span class="sxs-lookup"><span data-stu-id="73c64-166">**Check Requests to SharePoint**  The amount of data and requests made to the server should be limited as an overloaded page will experience poor performance.</span></span> <span data-ttu-id="73c64-167">此检查将验证对 SharePoint 发出的请求数, 并在请求超过6个请求时向您发出通知。</span><span class="sxs-lookup"><span data-stu-id="73c64-167">This check verifies the number of requests being made to SharePoint and will advise when the requests exceed 6 requests.</span></span> <span data-ttu-id="73c64-168">大多数请求应进行缓存, 因此不会对每个页面加载进行调用。</span><span class="sxs-lookup"><span data-stu-id="73c64-168">Most requests should be cached and therefore not called for every page load.</span></span> <span data-ttu-id="73c64-169">缓存应设置并使用至少15分钟, 以减少每个用户对一页的呼叫量。</span><span class="sxs-lookup"><span data-stu-id="73c64-169">Cache should be setup and utilized for at least 15 minutes to reduce the amount of calls to a page by each and every User.</span></span> <span data-ttu-id="73c64-170">这是一个常见问题, 在大多数情况下, 数据只每天进行一次更改, 而每个用户的每一页都会检查并提取数据 (通常是不必要的)。</span><span class="sxs-lookup"><span data-stu-id="73c64-170">This is a common problem and in most cases data only changes daily but the page checks and fetches data each time for each page for each user which is often unnecessary.</span></span>
    
3. <span data-ttu-id="73c64-171">**检查使用 cdn** 内容传递网络 (Cdn) 已由 Microsoft 提供, 此处提到的是 SharePoint Online 内容传递网络。</span><span class="sxs-lookup"><span data-stu-id="73c64-171">**Check using CDNs**  Content Delivery networks (CDNs) have been provided by Microsoft and the ones referred to here are the SharePoint Online Content Delivery Networks.</span></span> <span data-ttu-id="73c64-172">有多种类型可用, 也有不同的 CDN 服务 (如 SharePoint Cdn), 然后 Cdn 在 Azure 中。</span><span class="sxs-lookup"><span data-stu-id="73c64-172">There are multiple types available as well as different CDN services like SharePoint CDNs and then CDNs in Azure.</span></span> <span data-ttu-id="73c64-173">[使用以下指南](https://go.microsoft.com/fwlink/?linkid=873250)。</span><span class="sxs-lookup"><span data-stu-id="73c64-173">[Use the following guidance](https://go.microsoft.com/fwlink/?linkid=873250).</span></span>
    
4. <span data-ttu-id="73c64-174">**检查大图像大小** 应通过使用更好的 web 类型 (PNG) 来为 web 优化图像。</span><span class="sxs-lookup"><span data-stu-id="73c64-174">**Check for Large Image Sizes**  Images should be optimized for web by utilizing better web types like PNG.</span></span> <span data-ttu-id="73c64-175">图像呈现形式也应使用, 并在 SharePoint 中直接使用。</span><span class="sxs-lookup"><span data-stu-id="73c64-175">Image renditions should also be utilized and is available in SharePoint directly.</span></span> <span data-ttu-id="73c64-176">大于100kb 的图像/图像呈现方式将突出显示为 "未针对 web 进行优化"。</span><span class="sxs-lookup"><span data-stu-id="73c64-176">Images / image renditions larger than 100kb will be highlighted as not optimized for web.</span></span> <span data-ttu-id="73c64-177">[使用以下指南优化图像](https://go.microsoft.com/fwlink/?linkid=873251)。</span><span class="sxs-lookup"><span data-stu-id="73c64-177">[Use the following guidance for optimizing images](https://go.microsoft.com/fwlink/?linkid=873251).</span></span>
    
5. <span data-ttu-id="73c64-178">**检查结构导航** 结构导航最初设计用于在可以使用对象缓存的 SharePoint 本地环境中使用。</span><span class="sxs-lookup"><span data-stu-id="73c64-178">**Check for Structural Navigation**  Structural Navigation was originally designed for use in SharePoint on-Premises where object cache could be utilized.</span></span> <span data-ttu-id="73c64-179">不建议在 SharePoint Online 中使用结构导航, 也不应将其更改为托管导航或自定义提供程序。</span><span class="sxs-lookup"><span data-stu-id="73c64-179">Structural Navigation is not recommended for use in SharePoint Online and should be changed to Managed Navigation or a Custom Provider.</span></span> [<span data-ttu-id="73c64-180">使用以下指南优化导航。</span><span class="sxs-lookup"><span data-stu-id="73c64-180">Use the following guidance for optimizing navigation.</span></span>](https://go.microsoft.com/fwlink/?linkid=873247)
    
6. <span data-ttu-id="73c64-181">**检查 CBQ Web 部件**(CBQ-内容查询 Web 部件) "内容查询 Web 部件" 在每个用户的每个页面加载的查询中遍历查询中的所有项目时, Web 部件将生成高 SQL 负载。</span><span class="sxs-lookup"><span data-stu-id="73c64-181">**Check for CBQ WebPart** (CBQ - Content by Query WebPart)  The Content by Query WebPart generates a high SQL load as it traverses all items in the query for each and every page load, for each User.</span></span> <span data-ttu-id="73c64-182">与本地安装不同, 没有缓存可用于限制填充此 Web 部件所需的查询数。</span><span class="sxs-lookup"><span data-stu-id="73c64-182">Unlike an on-Premises installation, there is no cache available to limit the number of queries needed to populate this WebPart.</span></span> <span data-ttu-id="73c64-183">由于此类 CBQ 执行速度缓慢, 并影响整体页面性能, 因此这就是为什么不应使用它的原因。</span><span class="sxs-lookup"><span data-stu-id="73c64-183">As such CBQ performs slowly and impacts overall page performance which is why it should not be utilized.</span></span> <span data-ttu-id="73c64-184">请使用内容搜索 Web 部件 (CSWP) 作为内容查询 Web 部件的替换。</span><span class="sxs-lookup"><span data-stu-id="73c64-184">Please use the Content Search WebPart (CSWP) as the replacement for the Content Query WebPart.</span></span> <span data-ttu-id="73c64-185">[使用以下与内容搜索 Web 部件相关的指南](https://go.microsoft.com/fwlink/?linkid=873245)。</span><span class="sxs-lookup"><span data-stu-id="73c64-185">[Use the following guidance related to the Content Search WebPart](https://go.microsoft.com/fwlink/?linkid=873245).</span></span>

## <a name="how-to-use-the-network-trace-tab"></a><span data-ttu-id="73c64-186">如何使用网络跟踪选项卡</span><span class="sxs-lookup"><span data-stu-id="73c64-186">How to use the Network Trace tab</span></span>
    
<span data-ttu-id="73c64-187">"**网络跟踪**" 选项卡提供了有关生成页面的请求以及收到的响应的详细信息。</span><span class="sxs-lookup"><span data-stu-id="73c64-187">The **Network Trace** tab provides detailed information about the requests to build the page as well as the responses received.</span></span> 

1. <span data-ttu-id="73c64-188">**查找标记为红色的项目加载时间**。</span><span class="sxs-lookup"><span data-stu-id="73c64-188">**Look for item load times flagged as red**.</span></span> <span data-ttu-id="73c64-189">每个请求和响应的性能都根据其对总体页面性能的影响进行了颜色编码, 如下所示:</span><span class="sxs-lookup"><span data-stu-id="73c64-189">The performance of each request and response are color coded, based on their impact on the overall page performance  as follows:</span></span>
- <span data-ttu-id="73c64-190">绿色: \< 500ms</span><span class="sxs-lookup"><span data-stu-id="73c64-190">Green: \< 500ms</span></span>
- <span data-ttu-id="73c64-191">黄色: 500-1000ms</span><span class="sxs-lookup"><span data-stu-id="73c64-191">Yellow: 500-1000ms</span></span>
- <span data-ttu-id="73c64-192">红色: \> 1000ms</span><span class="sxs-lookup"><span data-stu-id="73c64-192">Red: \> 1000ms</span></span>
<br/><span data-ttu-id="73c64-193">![网络跟踪](media/3cfede99-7d31-4041-888d-7bbc275cadc2.png)</span><span class="sxs-lookup"><span data-stu-id="73c64-193">![Network Trace](media/3cfede99-7d31-4041-888d-7bbc275cadc2.png)</span></span><br/> <span data-ttu-id="73c64-194">在上面显示的图像中, 红色项目与默认页面相关。</span><span class="sxs-lookup"><span data-stu-id="73c64-194">In the image shown above, the red item pertains to the default page.</span></span> <span data-ttu-id="73c64-195">除非在 1000ms (小于1秒) 内\<加载页面, 否则它将始终显示红色。</span><span class="sxs-lookup"><span data-stu-id="73c64-195">It will always show red unless the page loads in \< 1000ms (less than 1 second).</span></span>

2. <span data-ttu-id="73c64-196">**测试项加载时间**。</span><span class="sxs-lookup"><span data-stu-id="73c64-196">**Test item load times**.</span></span> <span data-ttu-id="73c64-197">在某些情况下, 由于浏览器已缓存这些项, 因此不会有任何时间或颜色指示器。</span><span class="sxs-lookup"><span data-stu-id="73c64-197">In some cases there will be no time or color indicator because the items have already been cached by the browser.</span></span> <span data-ttu-id="73c64-198">若要正确测试此设置, 请打开页面, 清除浏览器缓存, 然后单击 "**启动**", 这将强制 "冷" 页面加载, 并成为初始页面加载的真正反映。</span><span class="sxs-lookup"><span data-stu-id="73c64-198">To test this correctly, open the page, clear browser cache, and then click **Start** as that will force a "cold" page load and be a true reflection of the initial page load.</span></span> <span data-ttu-id="73c64-199">此操作应与 "感兴趣" 页面加载进行比较, 这将有助于确定要在页面上缓存的项目。</span><span class="sxs-lookup"><span data-stu-id="73c64-199">This should then be compared to the "warm" page load as that will also help determine what items are being cached on the page.</span></span> 
    
3. <span data-ttu-id="73c64-200">**与可帮助调查问题的其他人共享相关详细信息**。</span><span class="sxs-lookup"><span data-stu-id="73c64-200">**Share relevant details with others who can help investigate issues**.</span></span> <span data-ttu-id="73c64-201">若要与您的开发人员或技术支持人员共享工具中提供的详细信息或信息, 请单击 "**导出到 JSON** " (如上图所示)。</span><span class="sxs-lookup"><span data-stu-id="73c64-201">To share the details or information provided in the tool with your developers or a technical support person, click **Export to JSON** (as shown in the image above).</span></span> <span data-ttu-id="73c64-202">这将使您能够通过 JSON 文件查看器进行查看, 从而下载结果。</span><span class="sxs-lookup"><span data-stu-id="73c64-202">That will enable you to download the results, viewable with a JSON file viewer.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="73c64-203">这些结果包含 Url 和可归类为 PII (个人身份信息) 的 Url。</span><span class="sxs-lookup"><span data-stu-id="73c64-203">These results contain URLs and that can be classified as PII (Personally Identifiable Information).</span></span> <span data-ttu-id="73c64-204">在分发该信息之前, 请确保遵守组织的准则。</span><span class="sxs-lookup"><span data-stu-id="73c64-204">Make sure to follow your organization's guidelines before distributing that information.</span></span> 

## <a name="engaging-with-microsoft-support"></a><span data-ttu-id="73c64-205">与 Microsoft 支持人员接洽</span><span class="sxs-lookup"><span data-stu-id="73c64-205">Engaging with Microsoft Support</span></span>
   
<span data-ttu-id="73c64-206">我们已加入**Microsoft 支持级别功能**, 仅当直接在性能支持案例上工作时才可使用此功能。</span><span class="sxs-lookup"><span data-stu-id="73c64-206">We have included a **Microsoft Support level feature** that should only be utilized when working directly on a Support Case for performance.</span></span> <span data-ttu-id="73c64-207">如果使用此功能, 则在没有我们的支持团队的情况下使用时不会向你提供任何好处。</span><span class="sxs-lookup"><span data-stu-id="73c64-207">Utilizing this feature will provide no benefit to you when used without our Support team.</span></span> <span data-ttu-id="73c64-208">实际上, 这会使页面的执行速度大大降低, 并且继续使用该功能可能会被视为 "误用" 服务。</span><span class="sxs-lookup"><span data-stu-id="73c64-208">It will in fact make the page perform significantly slower and continued use of the feature may be considered "misuse" of the service.</span></span> <span data-ttu-id="73c64-209">在工具中使用此功能时, 在将其他信息添加到服务中的日志记录中时, 不会提供任何其他信息。</span><span class="sxs-lookup"><span data-stu-id="73c64-209">There is no additional information when using this feature in the tool as the additional information is added to the logging in the service.</span></span> 

<span data-ttu-id="73c64-210">不显示任何更改, 只是通知您已启用该功能, 并且您的页面性能会显著降低2-3 倍于启用的性能速度。</span><span class="sxs-lookup"><span data-stu-id="73c64-210">No change is visible except that you will be notified that you have enabled it and your page performance will be significantly degraded by 2-3 times slower performance whilst that is enabled.</span></span> <span data-ttu-id="73c64-211">它将仅与特定页面和活动会话相关。</span><span class="sxs-lookup"><span data-stu-id="73c64-211">It will only be relevant for the particular page and that active session.</span></span> <span data-ttu-id="73c64-212">出于此原因, 应谨慎使用, 仅当主动与我们的支持团队进行接洽时使用。</span><span class="sxs-lookup"><span data-stu-id="73c64-212">For this reason, this should be used sparingly and only when actively engaged with our Support Team.</span></span>

### <a name="to-enable-the-microsoft-support-level-feature"></a><span data-ttu-id="73c64-213">启用 Microsoft 支持级别功能</span><span class="sxs-lookup"><span data-stu-id="73c64-213">To enable the Microsoft Support level feature</span></span>

1. <span data-ttu-id="73c64-214">打开 "页面诊断" 工具。</span><span class="sxs-lookup"><span data-stu-id="73c64-214">Open the Page Diagnostics tool.</span></span>
2. <span data-ttu-id="73c64-215">在键盘上, 按 ALT + Shift-L。</span><span class="sxs-lookup"><span data-stu-id="73c64-215">On your keyboard, press ALT-Shift-L.</span></span> <span data-ttu-id="73c64-216">这将显示 "**启用支持级别日志记录**"。</span><span class="sxs-lookup"><span data-stu-id="73c64-216">This will display **Enable support level logging**.</span></span> 
3. <span data-ttu-id="73c64-217">选中该复选框, 然后单击 "**开始**" 以重新加载页面并生成详细日志记录以支持进行分析。</span><span class="sxs-lookup"><span data-stu-id="73c64-217">Select the checkbox, and then click **start** to reload the page and generate verbose logging for Support to analyze.</span></span><br/><span data-ttu-id="73c64-218">![启用了支持选项](media/ddef47de-8593-4b28-9346-eb48ebf6cdab.png)</span><span class="sxs-lookup"><span data-stu-id="73c64-218">![Support Option Enabled](media/ddef47de-8593-4b28-9346-eb48ebf6cdab.png)</span></span>
  
<span data-ttu-id="73c64-219">此内容的一个重要元素是 CorrelationID, 因为支持团队将利用该编号提取所需的信息。</span><span class="sxs-lookup"><span data-stu-id="73c64-219">An important element for this is the CorrelationID as the Support team will then utilize that number to extract the information needed.</span></span> <span data-ttu-id="73c64-220">请复制 CorrelationID (在页面诊断工具的顶部), 并提供支持, 因为它们无法在没有完整 ID 的情况下执行所需的操作。</span><span class="sxs-lookup"><span data-stu-id="73c64-220">Please copy the CorrelationID (at the top of the Page Diagnostics tool) and provide that to Support as they cannot perform the required work without the complete ID.</span></span>
    
## <a name="related-topics"></a><span data-ttu-id="73c64-221">相关主题</span><span class="sxs-lookup"><span data-stu-id="73c64-221">Related topics</span></span>

[<span data-ttu-id="73c64-222">优化 SharePoint Online 性能</span><span class="sxs-lookup"><span data-stu-id="73c64-222">Tune SharePoint Online performance</span></span>](tune-sharepoint-online-performance.md)

[<span data-ttu-id="73c64-223">优化 Office 365 性能</span><span class="sxs-lookup"><span data-stu-id="73c64-223">Tune Office 365 performance</span></span>](tune-office-365-performance.md)

[<span data-ttu-id="73c64-224">内容分发网络</span><span class="sxs-lookup"><span data-stu-id="73c64-224">Content delivery networks</span></span>](content-delivery-networks.md)
